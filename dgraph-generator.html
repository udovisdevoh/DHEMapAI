<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Générateur de Prompt D-Graph (Final)</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            padding: 20px;
            max-width: 900px;
            margin: auto;
            background-color: #f0f2f5;
            color: #1d2129;
        }

        .container {
            background-color: #fff;
            padding: 20px 40px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        h1 {
            color: #1877f2;
            text-align: center;
            border-bottom: 2px solid #e1e4e8;
            padding-bottom: 15px;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: #606770;
            margin-bottom: 25px;
            font-style: italic;
            font-size: 0.9em;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #4b4f56;
        }

        input[type="text"], select, textarea {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 1px solid #ccd0d5;
            border-radius: 6px;
            box-sizing: border-box;
            transition: all 0.2s;
        }

            input[type="text"]:focus, select:focus, textarea:focus {
                border-color: #1877f2;
                outline: none;
                box-shadow: 0 0 0 2px rgba(24, 119, 242, 0.2);
            }

        textarea {
            resize: vertical;
            min-height: 120px;
        }

        .button-container {
            text-align: center;
            margin-top: 25px;
            margin-bottom: 25px;
        }

        button {
            background-color: #1877f2;
            color: white;
            border: none;
            padding: 14px 28px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }

            button:hover {
                background-color: #166fe5;
            }

        .output-container {
            margin-top: 30px;
            position: relative;
        }

        #promptOutput {
            background-color: #f0f2f5;
            color: #333;
            font-family: Consolas, 'Courier New', monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
            border-color: #e1e4e8;
        }

        #copyButton {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #6c757d;
            font-size: 14px;
            padding: 8px 12px;
            font-weight: normal;
        }

            #copyButton:hover {
                background-color: #5a6268;
            }

        @media (max-width: 600px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Générateur de Dossier de Conception (D-Graph)</h1>
        <p class="subtitle">Cet outil instruit une IA pour qu'elle agisse comme un level designer et un artiste d'environnement.</p>

        <div class="form-grid">
            <div class="form-group">
                <label for="gameSelect">Jeu</label>
                <select id="gameSelect">
                    <option value="doom">Doom</option>
                    <option value="doom2" selected>Doom 2</option>
                    <option value="heretic">Heretic</option>
                    <option value="hexen">Hexen</option>
                </select>
            </div>
            <div class="form-group">
                <label for="themeSelect">Thème de la Carte</label>
                <select id="themeSelect"></select>
            </div>
            <div class="form-group full-width" id="customThemeContainer" style="display: none;">
                <label for="customThemeInput">Thème Personnalisé</label>
                <input type="text" id="customThemeInput" placeholder="Ex: Cité sous-marine biomecanique">
            </div>
            <div class="form-group">
                <label for="sizeSelect">Nombre de Pièces</label>
                <select id="sizeSelect">
                    <option value="très petite (3-5 pièces)">Très Petite (3-5)</option>
                    <option value="petite (6-9 pièces)" selected>Petite (6-9)</option>
                    <option value="moyenne (10-15 pièces)">Moyenne (10-15)</option>
                    <option value="grande (16-25 pièces)">Grande (16-25)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="connectivitySelect">Connectivité</label>
                <select id="connectivitySelect">
                    <option value="linéaire">Linéaire (A -> B -> C)</option>
                    <option value="avec embranchements" selected>Avec embranchements</option>
                    <option value="en hub (une pièce centrale)">En hub</option>
                    <option value="non-linéaire et complexe">Non-linéaire</option>
                </select>
            </div>
        </div>
        <div class="form-group full-width">
            <label for="descriptionText">Brief Créatif (Facultatif)</label>
            <textarea id="descriptionText" placeholder="Décrivez l'objectif de la carte, une idée de progression, une ambiance particulière..."></textarea>
        </div>

        <div class="button-container"><button type="button" id="generateButton">Générer le Prompt</button></div>

        <div class="output-container">
            <label for="promptOutput">Prompt Généré (Dossier de Conception Complet)</label>
            <textarea id="promptOutput" rows="25" readonly></textarea>
            <button id="copyButton">Copier le Prompt</button>
        </div>
    </div>

    <script>
        const GAME_DATA = {
            doom: {
                themes: ["Base Technologique (E1)", "Rivages de l'Enfer (E2)", "Base Gothique/Corrompue (E3)", "Laboratoire de Slime"],
                things: [{ "type": 1, "name": "Player 1 Start" }, { "type": 3001, "name": "Imp" }, { "type": 3004, "name": "Zombieman" }],
                textures: ["AASHIT1", "AASHIT2", "BARREL", "BIGDOOR1", "BIGDOOR2", "BIGDOOR3", "BIGDOOR4", "BIGDOOR5", "BIGDOOR6", "BIGDOOR7", "BRICK1", "BRICK2", "BRICK3", "BRICK4", "BRICK5", "BRICK6", "BRICK7", "BRICK8", "BRICK9", "BRICK10", "BRICK11", "BRICK12", "BRNPOIS", "BROWN1", "BROWN96", "BROWNGRN", "CEIL3_1", "CEIL3_2", "CEIL4_1", "CEIL4_2", "CEIL4_3", "CEIL5_1", "CEIL5_2", "COMPTALL", "CRAT1", "CRAT2", "CRAT3", "DOOR1", "DOOR3", "DOORBLU", "DOORRED", "DOORYEL", "DOORTRAK", "EXITDOOR", "EXITSIGN", "GRAY1", "GRAY4", "GRAY7", "GRAYTALL", "GSTANCE", "LITE1", "LITE2", "LITE3", "LITE4", "LITE5", "LITEBLU", "LITEGRN", "LITERED", "MARBLE1", "MARBLE2", "MARBLE3", "MARBLE4", "METAL", "METAL1", "METAL2", "METAL3", "METAL4", "METAL5", "METAL6", "METAL7", "NUKAGE1", "NUKAGE2", "NUKAGE3", "PLAT1", "PLAT2", "PLAT3", "ROCK01", "ROCK02", "ROCK03", "ROCK04", "ROCK05", "SHAWN1", "SHAWN2", "SKIN1", "SKIN2", "SKIN3", "SKINBORD", "SKY1", "SKY2", "SKY3", "SLADWALL", "SP_HOT1", "SP_HOT2", "SP_HOT3", "SP_HOT4", "STARG1", "STARG2", "STARGR1", "STEP1", "STEP2", "STEP3", "STEP4", "STEP5", "STEP6", "SUPPORT1", "SUPPORT2", "SUPPORT3", "SW1BRN1", "SW1BRN2", "SW1COMM", "SW1COMP", "SW1EXIT", "SW1GRAY", "SW1GREN", "SW1HOT", "SW1LIT", "SW1MARB", "SW1METAL", "SW1PIPE", "SW1ROCK", "SW1SKIN", "SW1STAR", "SW1STON", "SW1WOOD", "SW2BRN1", "SW2BRN2", "SW2COMM", "SW2COMP", "SW2EXIT", "SW2GRAY", "SW2GREN", "SW2HOT", "SW2LIT", "SW2MARB", "SW2METAL", "SW2PIPE", "SW2ROCK", "SW2SKIN", "SW2STAR", "SW2STON", "SW2WOOD", "TEKWALL1", "TEKWALL2", "TEKWALL3", "TEKWALL4", "WOOD1", "WOOD2", "WOOD3", "WOOD4", "WOOD5", "WOOD6", "WOOD7", "WOOD8", "WOOD9"],
                flats: ["CEIL1_1", "CEIL1_2", "CEIL1_3", "CEIL2_1", "CEIL2_2", "CEIL2_3", "CEIL3_1", "CEIL3_2", "CEIL3_3", "CEIL4_1", "CEIL4_2", "CEIL4_3", "CEIL5_1", "CEIL5_2", "COMP01", "F_SKY1", "F_SKY2", "F_SKY3", "FLAT1", "FLAT2", "FLAT3", "FLAT4", "FLAT5", "FLAT6", "FLAT8", "FLAT9", "FLAT10", "FLAT12", "FLAT13", "FLAT14", "FLAT15", "FLAT16", "FLAT17", "FLAT18", "FLAT19", "FLAT20", "FLAT21", "FLAT22", "FLAT23", "FLOOR0_1", "FLOOR0_2", "FLOOR0_3", "FLOOR0_4", "FLOOR0_5", "FLOOR0_6", "FLOOR0_7", "FLOOR1_1", "FLOOR1_6", "FLOOR1_7", "FLOOR3_3", "FLOOR4_1", "FLOOR4_5", "FLOOR4_6", "FLOOR4_8", "FLOOR5_1", "FLOOR5_2", "FLOOR5_3", "FLOOR5_4", "FWATER1", "FWATER2", "FWATER3", "FWATER4", "LAVA1", "LAVA2", "LAVA3", "LAVA4", "MFLR8_1", "MFLR8_2", "MFLR8_3", "MFLR8_4", "NUKAGE1", "NUKAGE2", "NUKAGE3", "RROCK01", "RROCK02", "RROCK03", "RROCK04", "SLIME09", "SLIME10", "SLIME11", "SLIME12", "TLITE6_1", "TLITE6_4", "TLITE6_5", "TLITE6_6"]
            },
            doom2: {
                themes: ["Complexe Industriel UAC", "Enfer sur Terre", "Ville en Ruines", "Forteresse Gothique", "Usine de Traitement", "Niveau Abstrait"],
                things: [{ "type": 1, "name": "Player 1 Start" }, { "type": 64, "name": "Heavy Weapon Dude" }, { "type": 67, "name": "Mancubus" }, { "type": 65, "name": "Arch-Vile" }, { "type": 82, "name": "Super Shotgun" }],
                textures: ["AASHIT1", "AASHIT2", "ASHWALL", "BARNS", "BARREL", "BIGDOOR1", "BIGDOOR2", "BIGDOOR3", "BIGDOOR4", "BIGDOOR5", "BIGDOOR6", "BIGDOOR7", "BRICK1", "BRICK2", "BRICK3", "BRICK4", "BRICK5", "BRICK6", "BRICK7", "BRICK8", "BRICK9", "BRICK10", "BRICK11", "BRICK12", "BRNPOIS", "BRONZE1", "BRONZE2", "BRONZE3", "BRONZE4", "BROWN1", "BROWN96", "BROWNGRN", "CEMENT1", "CEMENT2", "CEMENT3", "CEMENT4", "CEMENT5", "CEMENT6", "CEMENT7", "CEMENT8", "CEMENT9", "COMP1", "COMP2", "COMPTALL", "COMPUTER", "CRATE1", "CRATE2", "CRATE3", "CRATETOP", "CRATIN", "DOOR1", "DOOR3", "DOORBLU", "DOORRED", "DOORYEL", "DOORTRAK", "EXITDOOR", "EXITSIGN", "GRAY1", "GRAY4", "GRAY7", "GRAYTALL", "GSTANCE", "GSTONE1", "GSTONE2", "GSTONPOP", "ICWALL1", "ICWALL2", "ICWALL3", "ICWALL4", "ICWALL5", "LITE1", "LITE2", "LITE3", "LITE4", "LITE5", "LITEBLU", "LITEGRN", "LITERED", "MARB1", "MARB2", "MARB3", "MARBFAC1", "MARBFAC2", "MARBFAC3", "MARBFAC4", "MARBLE1", "MARBLE2", "MARBLE3", "MARBLE4", "METAL", "METAL1", "METAL2", "METAL3", "METAL4", "METAL5", "METAL6", "METAL7", "MIDGRATE", "MOSS1", "MOSS2", "MOSS3", "NUKAGE1", "NUKAGE2", "NUKAGE3", "PIPE1", "PIPE2", "PIPE3", "PIPE4", "PIPE5", "PIPE6", "PLAT1", "PLAT2", "PLAT3", "ROCK01", "ROCK02", "ROCK03", "ROCK04", "ROCK05", "ROCK06", "ROCK07", "ROCK08", "SHAWN1", "SHAWN2", "SKIN1", "SKIN2", "SKIN3", "SKINBORD", "SKY1", "SKY2", "SKY3", "SLADWALL", "SP_FACE1", "SP_FACE2", "SP_HOT1", "SP_HOT2", "SP_HOT3", "SP_HOT4", "STARG1", "STARG2", "STARGR1", "STEP1", "STEP2", "STEP3", "STEP4", "STEP5", "STEP6", "STONE1", "STONE2", "STONE3", "STONE4", "STONPOIS", "SUPPORT1", "SUPPORT2", "SUPPORT3", "SW1BRN1", "SW1BRN2", "SW1COMM", "SW1COMP", "SW1EXIT", "SW1GRAY", "SW1GREN", "SW1HOT", "SW1LIT", "SW1MARB", "SW1METAL", "SW1PIPE", "SW1ROCK", "SW1SKIN", "SW1STAR", "SW1STON", "SW1WOOD", "SW2BRN1", "SW2BRN2", "SW2COMM", "SW2COMP", "SW2EXIT", "SW2GRAY", "SW2GREN", "SW2HOT", "SW2LIT", "SW2MARB", "SW2METAL", "SW2PIPE", "SW2ROCK", "SW2SKIN", "SW2STAR", "SW2STON", "SW2WOOD", "SWITCH1", "SWITCH2", "SWTCHPNL", "TEKBRON", "TEKGREN", "TEKWALL1", "TEKWALL2", "TEKWALL3", "TEKWALL4", "TEKWALL5", "WOOD1", "WOOD2", "WOOD3", "WOOD4", "WOOD5", "WOOD6", "WOOD7", "WOOD8", "WOOD9", "ZZWOLF1", "ZZWOLF2", "ZZWOLF3", "ZZWOLF4", "ZZWOLF5", "ZZWOLF6", "ZZWOLF7", "ZZWOLF8"],
                flats: ["CEIL1_1", "CEIL1_2", "CEIL1_3", "CEIL2_1", "CEIL2_2", "CEIL2_3", "CEIL3_1", "CEIL3_2", "CEIL3_3", "CEIL4_1", "CEIL4_2", "CEIL4_3", "CEIL5_1", "CEIL5_2", "COMP01", "CRATOP1", "CRATOP2", "DEM1_1", "DEM1_2", "DEM1_3", "DEM1_4", "DEM1_5", "DEM1_6", "F_SKY1", "FLAT1", "FLAT2", "FLAT3", "FLAT4", "FLAT5", "FLAT6", "FLAT8", "FLAT9", "FLAT10", "FLAT12", "FLAT13", "FLAT14", "FLAT15", "FLAT16", "FLAT17", "FLAT18", "FLAT19", "FLAT20", "FLAT21", "FLAT22", "FLAT23", "FLAT5_1", "FLAT5_2", "FLAT5_3", "FLAT5_4", "FLAT5_5", "FLAT5_6", "FLAT5_7", "FLAT5_8", "FLOOR0_1", "FLOOR0_2", "FLOOR0_3", "FLOOR0_4", "FLOOR0_5", "FLOOR0_6", "FLOOR0_7", "FLOOR1_1", "FLOOR1_6", "FLOOR1_7", "FLOOR3_3", "FLOOR4_1", "FLOOR4_5", "FLOOR4_6", "FLOOR4_8", "FLOOR5_1", "FLOOR5_2", "FLOOR5_3", "FLOOR5_4", "FWATER1", "FWATER2", "FWATER3", "FWATER4", "GATE1", "GATE2", "GATE3", "GATE4", "GRASS1", "GRASS2", "LAVA1", "LAVA2", "LAVA3", "LAVA4", "MFLR8_1", "MFLR8_2", "MFLR8_3", "MFLR8_4", "NUKAGE1", "NUKAGE2", "NUKAGE3", "RROCK01", "RROCK02", "RROCK03", "RROCK04", "RROCK05", "RROCK06", "RROCK07", "RROCK08", "SLIME01", "SLIME02", "SLIME03", "SLIME04", "SLIME05", "SLIME06", "SLIME07", "SLIME08", "SLIME09", "SLIME10", "SLIME11", "SLIME12", "STEP1", "STEP2", "TECH01", "TECH02", "TECH03", "TECH04", "TECHF1", "TECHF2", "TECHF3", "TECHF4", "TLITE6_1", "TLITE6_4", "TLITE6_5", "TLITE6_6"],
            },
            heretic: {
                themes: ["Château Médiéval", "Donjon Volcanique", "Donjons Inondés", "Temple de la Forêt"],
                things: [{ "type": 14, "name": "Player 1 Start" }, { "type": 66, "name": "Golem" }, { "type": 10, "name": "Undead Warrior" }],
                textures: ["BIGDOOR1", "BIGDOOR2", "BIGDOOR3", "BIGDOOR4", "BIGDOOR5", "BIGDOOR6", "BIGDOOR7", "BRASS1", "BRICK01", "BRICK02", "BRICK03", "BRICK04", "BRICK05", "BRICK06", "BRICK07", "BRICK08", "BRICK09", "BRICK10", "CASTLE1", "CASTLE2", "CASTLE3", "CASTLE4", "CASTLE5", "CASTLE6", "CASTLE7", "CEMENT01", "CEMENT02", "CEMENT03", "CEMENT04", "CEMENT05", "DOOR01", "DOOR02", "DOOR03", "DOOR04", "DOOR05", "DOOR06", "DOOR07", "DOOR08", "DOOR09", "DOOR10", "DOOR11", "DOOR12", "DOOR13", "DOOR14", "DOOR15", "DOOR16", "DOOR17", "DOOR18", "DOOR19", "DOOR20", "DOOR21", "DOOR22", "DOOR23", "DOOR24", "EXIT01", "EXIT02", "GLASS01", "GLASS02", "GLASS03", "GLASS04", "GLASS05", "GLASS06", "LAVA01", "LAVA02", "LAVA03", "LAVA04", "LITE01", "LITE02", "LITE03", "LITE04", "LITE05", "MARB01", "MARB02", "MARB03", "MARB04", "MET01", "MET02", "MET03", "MET04", "MET05", "MET06", "MOSS01", "MOSS02", "MOSS03", "MOSS04", "ROCK01", "ROCK02", "ROCK03", "ROCK04", "ROCK05", "SAND01", "SAND02", "SKY01", "SKY02", "SKY03", "SLIME01", "SLIME02", "SNAKE01", "SNAKE02", "SNAKE03", "SNAKE04", "SNAKE05", "STAR01", "STAR02", "STONE01", "STONE02", "STONE03", "STONE04", "STONE05", "STONE06", "STONE07", "STONE08", "STONE09", "STONE10", "STONE11", "STONE12", "STONE13", "STONE14", "SW01", "SW02", "SW03", "SW04", "SW05", "SW06", "SW07", "SW08", "SW09", "SW10", "SW11", "SW12", "SW13", "SW14", "SW15", "SW16", "SW17", "SW18", "SW19", "SW20", "SW21", "SW22", "SW23", "SW24", "VINE01", "VINE02", "VINE03", "WALL01", "WALL02", "WALL03", "WALL04", "WALL05", "WALL06", "WALL07", "WALL08", "WALL09", "WALL10", "WALL11", "WALL12", "WALL13", "WALL14", "WALL15", "WALL16", "WATER01", "WATER02", "WATER03", "WIND01", "WIND02", "WIND03", "WIND04", "WOOD01", "WOOD02", "WOOD03", "WOOD04", "WOOD05", "WOOD06", "WOOD07", "WOOD08", "WOOD09", "WOOD10", "WOOD11", "WOOD12", "WIZWALL1", "WIZWALL2", "WIZWALL3", "WIZWALL4"],
                flats: ["CEIL01", "CEIL02", "CEIL03", "CEIL04", "CEIL05", "CEIL06", "CEIL07", "CEIL08", "CEIL09", "CEIL10", "CEIL11", "FLAT01", "FLAT02", "FLAT03", "FLAT04", "FLAT05", "FLAT06", "FLAT07", "FLAT08", "FLAT09", "FLAT10", "FLAT11", "FLAT12", "FLAT13", "FLAT14", "FLAT15", "FLAT16", "FLAT17", "FLAT18", "FLAT19", "FLAT20", "FLAT21", "FLAT22", "FLAT23", "FLOOR01", "FLOOR02", "FLOOR03", "FLOOR04", "FLOOR05", "FLOOR06", "FLOOR07", "FLOOR08", "FLOOR09", "FLOOR10", "FLOOR11", "FLOOR12", "FLOOR13", "FLOOR14", "FLOOR15", "FLOOR16", "FLOOR17", "FLOOR18", "FLOOR19", "FLOOR20", "FLOOR21", "FLOOR22", "FLOOR23", "FLOOR24", "FLOOR25", "FLOOR26", "FLOOR27", "FLOOR28", "FLOOR29", "FLOOR30", "FLOOR31", "GRASS01", "GRASS02", "LAVA01", "LAVA02", "LAVA03", "LAVA04", "MARB01", "MARB02", "MFLR01", "MFLR02", "MFLR03", "MFLR04", "MFLR05", "MFLR06", "MFLR07", "MFLR08", "SKY01", "SKY02", "SKY03", "SLIME01", "SLIME02", "SLIME03", "SLIME04", "WATER01", "WATER02", "WATER03", "WATER04"],
            },
            hexen: {
                themes: ["Forteresse Sombre", "Monastère de Glace", "Marais des Morts", "Tour du Mage"],
                things: [{ "type": 100, "name": "Fighter Player Start" }, { "type": 101, "name": "Cleric Player Start" }, { "type": 102, "name": "Mage Player Start" }, { "type": 103, "name": "Pig Player Start" }, { "type": 11, "name": "Deathmatch Start" }, { "type": 3, "name": "Ettin" }, { "type": 6, "name": "Centaur" }, { "type": 5, "name": "Centaur Leader" }, { "type": 1010, "name": "Afrit" }, { "type": 1011, "name": "Green Chaos Serpent" }, { "type": 1012, "name": "Brown Chaos Serpent" }, { "type": 1017, "name": "Slaughtaur" }, { "type": 1018, "name": "Slaughtaur Leader" }, { "type": 1019, "name": "Dark Bishop" }, { "type": 1024, "name": "Stalker" }, { "type": 1025, "name": "Stalker Leader" }, { "type": 1028, "name": "Heresiarch" }, { "type": 160, "name": "Death Wyvern" }, { "type": 120, "name": "Korax (Boss)" }, { "type": 8000, "name": "Timon's Axe" }, { "type": 8001, "name": "Hammer of Retribution" }, { "type": 8002, "name": "Quietus" }, { "type": 8003, "name": "Serpent Staff" }, { "type": 8004, "name": "Firestorm" }, { "type": 8005, "name": "Wraithverge" }, { "type": 8006, "name": "Frost Shards" }, { "type": 8007, "name": "Arc of Death" }, { "type": 8008, "name": "Bloodscourge" }, { "type": 18, "name": "Blue Mana" }, { "type": 19, "name": "Green Mana" }, { "type": 20, "name": "Combined Mana" }, { "type": 8011, "name": "Krater of Might" }, { "type": 8012, "name": "Dragonskin Bracers" }, { "type": 8013, "name": "Mystic Ambit Incant" }, { "type": 8014, "name": "Disc of Repulsion" }, { "type": 8015, "name": "Boots of Speed" }, { "type": 8016, "name": "Torch" }, { "type": 8017, "name": "Quartz Flask" }, { "type": 8018, "name": "Platinum Helmet" }, { "type": 8019, "name": "Mesh Armor" }, { "type": 8020, "name": "Falcon Shield" }, { "type": 8021, "name": "Porkalator" }, { "type": 8022, "name": "Dark Servant" }, { "type": 8023, "name": "Icon of the Defender" }, { "type": 8024, "name": "Banishment Device" }, { "type": 8025, "name": "Flechette" }, { "type": 9001, "name": "Fire Key" }, { "type": 9002, "name": "Steel Key" }, { "type": 9003, "name": "Cave Key" }, { "type": 9004, "name": "Emerald Key" }, { "type": 9005, "name": "Dungeon Key" }, { "type": 9006, "name": "Silver Key" }, { "type": 9007, "name": "Rusty Key" }, { "type": 9008, "name": "Horn Key" }, { "type": 9009, "name": "Swamp Key" }, { "type": 9010, "name": "Castle Key" }, { "type": 10001, "name": "Serpent Torch" }, { "type": 10002, "name": "Chandelier" }, { "type": 10003, "name": "Barrel" }, { "type": 10004, "name": "Brown Pillar" }, { "type": 10005, "name": "Stalactite" }, { "type": 10006, "name": "Stalagmite" }, { "type": 10007, "name": "Candle" }],
                textures: ["BIGDOOR1", "BOLDER01", "BRASS01", "BRASS_A1", "BRICK01", "CASTLE01", "CAVE01", "CRYSTAL1", "DEMON_A1", "DOOR01", "DOOR14", "FIREBAK1", "FLAME_A1", "GATE01", "GLASS01", "ICE01", "LAVA1", "MARBLE01", "METAL01", "MOSS01", "ROCK01", "RUST01", "SKY_1", "STAINED1", "STONE01", "SUPPORT1", "SWITCH01", "TAP01", "TELEPORT", "WALL01", "WATER01", "WOOD01", "WOOD04", "WOODMET1", "WOODGARG"],
                flats: ["CEILING1", "CEILING2", "CEILING3", "CEILING4", "CEILING5", "CEILING6", "CEILING7", "FLAT01", "FLAT02", "FLAT03", "FLAT04", "FLAT05", "FLAT06", "FLAT07", "FLAT08", "FLAT09", "FLAT10", "FLAT11", "FLAT12", "FLAT13", "FLAT14", "FLAT15", "FLAT16", "FLAT17", "FLAT18", "FLAT19", "FLAT20", "FLAT21", "FLAT22", "FLAT23", "FLAT24", "FLAT25", "FLAT26", "FLAT27", "FLAT28", "FLAT29", "FLAT30", "FLAT31", "FLOOR01", "FLOOR02", "FLOOR03", "FLOOR04", "FLOOR05", "FLOOR06", "FLOOR07", "FLOOR08", "FLOOR09", "FLOOR10", "FLOOR11", "FLOOR12", "FLOOR13", "FLOOR14", "FLOOR15", "FLOOR16", "FLOOR17", "FLOOR18", "FLOOR19", "FLOOR20", "FLOOR21", "FLOOR22", "FLOOR23", "FLOOR24", "FLOOR25", "FLOOR26", "FLOOR27", "FLOOR28", "FLOOR29", "FLOOR30", "FLOOR31", "FLOOR32", "FLOOR33", "FLOOR34", "FLOOR35", "FLOOR36", "FLOOR37", "FLOOR38", "FLOOR39", "FLOOR40", "FLOOR41", "FLOOR42", "FLOOR43", "FLOOR44", "FLOOR45", "FLOOR46", "FLOOR47", "FLOOR48", "FLOOR49", "FLOOR50", "FLOOR51", "FLOOR52", "FLOOR53", "FLOOR54", "GRASS01", "GRASS02", "ICE01", "ICE02", "ICE03", "ICE04", "LAVA01", "MUD01", "SKY_1", "SKY_2", "SKY_3", "SKY_4", "SKY_5", "SKY_6", "SKY_7", "SKY_8", "SWAMP01", "SWAMP02", "SWAMP03", "SWAMP04", "WATER01", "WATER02", "WATER03", "WATER04", "WATER05", "WATER06"],
            }
        };

        const dgraphSpecification = `Tu es un level designer senior et un artiste d'environnement spécialisé dans les jeux de tir à la première personne classiques.
Ta mission est de générer un **objet JSON complet et valide** qui décrit la structure et le thème d'une carte de jeu, en respectant scrupuleusement le format abstrait "D-Graph" version 1.3.

**CONTRAINTE FONDAMENTALE : GRAPHE PLANAIRE**
La carte de Doom est un graphe planaire. Cela signifie que les pièces (secteurs) ne peuvent pas se superposer ou se croiser. Tu dois respecter cette contrainte dans la manière dont tu connectes les pièces.

---
**PARTIE 1 : SPÉCIFICATION TECHNIQUE DU FORMAT D-GRAPH v1.3**
---

**1. OBJET RACINE**
L'objet principal du fichier JSON.
- \`format\`: String, REQUIS. Doit être "D-Graph".
- \`version\`: String, REQUIS. Doit être "1.3".
- \`mapInfo\`: Object, REQUIS. Voir section 1.1.
- \`themePalette\`: Object, REQUIS. Voir section 1.2.
- \`rooms\`: Array<Object>, REQUIS. Voir section 1.3.
- \`connections\`: Array<Object>, REQUIS. Voir section 1.4.

**1.1. Spécification de \`mapInfo\`**
- \`game\`: String, REQUIS. Enum: "doom", "doom2", "heretic", "hexen".
- \`map\`: Integer, REQUIS. Numéro de la carte.
- \`name\`: String, REQUIS. Nom de la carte.
- \`music\`: String, REQUIS. Nom du lump de musique (ex: "D_RUNNIN").

**1.2. Spécification de \`themePalette\`**
Définit le vocabulaire visuel. Chaque clé est un concept fonctionnel, et la valeur est un tableau de textures pondérées \`{ "name": String, "weight": Integer }\`.
**Concepts de Palette (liste exhaustive et fixe) :**
- Murs : \`wall_primary\`, \`wall_accent\`, \`wall_support\`, \`wall_secret_indicator\`, \`wall_panel\`.
- Sols/Plafonds : \`floor_primary\`, \`floor_accent\`, \`floor_damage_low\`, \`floor_damage_high\`, \`ceiling_primary\`, \`ceiling_light_source\`, \`ceiling_crusher\`, \`platform_surface\`.
- Portes/Passages : \`door_regular\`, \`door_locked\`, \`door_exit\`, \`door_frame\`, \`stair_riser\`, \`window_grate\`.
- Interrupteurs : \`switch_utility\`, \`switch_exit\`, \`switch_panel_wall\`.
- Mécaniques : \`teleporter_pad\`.

**1.3. Spécification de \`room\`**
Décrit une zone ou un secteur de la carte.
- \`id\`: String, REQUIS. Identifiant unique (ex: "salle_de_controle").
- \`parentRoom\`: String | null, REQUIS. ID de la pièce parente si imbriquée, sinon \`null\`.
- \`shapeHint\`: Object, REQUIS. Contient :
          - \`vertices\`: Integer, REQUIS. Nombre de sommets (ex: 4).
          - \`description\`: String, REQUIS. Description textuelle (ex: "Carré et symétrique").
- \`properties\`: Object, REQUIS. Contient :
          - \`floor\`, \`ceiling\`: String, REQUIS. Enum: "very_low", "low", "normal", "high", "very_high", "sky".
          - \`lightLevel\`: String, REQUIS. Enum: "very_dark", "dark", "normal", "bright", "flickering", "strobe".
          - \`wallTexture\`, \`floorFlat\`, \`ceilingFlat\`: String, REQUIS. Doivent correspondre à une clé de la \`themePalette\`.
- \`contents\`: Object, REQUIS. Contient les tableaux \`monsters\`, \`items\`, \`decorations\`. Chaque élément est un objet \`{ "type": String, "count": Integer }\`.
- \`features\`: Array<Object>, REQUIS. Décrit les actions sur les murs. Chaque élément est un objet \`{ "type": String, "count": Integer, "properties": Object }\`.

**1.4. Spécification de \`connection\`**
Décrit un lien entre deux pièces.
- \`fromRoom\`, \`toRoom\`: String, REQUIS. IDs des pièces connectées.
- \`type\`: String, REQUIS. Enum: "opening", "door", "locked_door", "window", "teleporter".
- \`properties\`: Object, REQUIS. Détails de la connexion (ex: \`{ "texture": "DOORBLU", "key": "blue" }\`).

**1.5. Exemple Complet de Structure**
\`\`\`json
{
          "format": "D-Graph", "version": "1.3",
          "mapInfo": { "game": "doom2", "map": 1, "name": "Exemple", "music": "D_DOOM2" },
          "themePalette": { "wall_primary": [{ "name": "TEKWALL1", "weight": 100 }] },
          "rooms": [ { "id": "room_a", "parentRoom": null, "shapeHint": { "vertices": 4, "description": "Carré" }, "properties": { "floor": "normal", "ceiling": "normal", "lightLevel": "normal", "wallTexture": "wall_primary", "floorFlat": "floor_primary", "ceilingFlat": "ceiling_primary" }, "contents": { "monsters": [] }, "features": [] } ],
          "connections": [ { "fromRoom": "room_a", "toRoom": "room_b", "type": "door", "properties": {} } ]
}
\`\`\`
`;
        const gameSelect = document.getElementById('gameSelect');
        const themeSelect = document.getElementById('themeSelect');
        const customThemeContainer = document.getElementById('customThemeContainer');
        const customThemeInput = document.getElementById('customThemeInput');

        function updateThemes() {
            const selectedGame = gameSelect.value;
            themeSelect.innerHTML = '';
            const themes = GAME_DATA[selectedGame].themes;
            const customOption = document.createElement('option');
            customOption.value = 'custom'; customOption.textContent = '-- Autre (spécifier) --';
            const randomOption = document.createElement('option');
            randomOption.value = 'random'; randomOption.textContent = '-- Aléatoire --';
            themeSelect.appendChild(randomOption);
            themes.forEach(themeName => { const option = document.createElement('option'); option.value = themeName; option.textContent = themeName; themeSelect.appendChild(option); });
            themeSelect.appendChild(customOption);
        }

        function handleThemeChange() {
            customThemeContainer.style.display = (themeSelect.value === 'custom') ? 'block' : 'none';
            generatePrompt();
        }

        function generatePrompt() {
            const game = gameSelect.value;
            let themeName = themeSelect.value === 'custom' ? (customThemeInput.value || "Thème personnalisé non défini") : themeSelect.value;
            if (themeName === 'random') {
                const themes = GAME_DATA[game].themes;
                const randomIndex = Math.floor(Math.random() * themes.length);
                themeName = themes[randomIndex];
            }

            const size = document.getElementById('sizeSelect').value;
            const connectivity = document.getElementById('connectivitySelect').value;
            const description = document.getElementById('descriptionText').value;

            const data = GAME_DATA[game];

            // Le texte du prompt est maintenant le même pour tous les jeux car toutes les listes sont complètes.
            let textureListText = `**Textures de Murs Valides (\`textures\`):**
La liste complète suivante doit être utilisée.
${data.textures.join(', ')}`;

            let flatListText = `**Textures de Sol/Plafond Valides (\`flats\`):**
La liste complète suivante doit être utilisée.
${data.flats.join(', ')}`;

            let gameDataReference = `---
**PARTIE 2 : VOCABULAIRE VISUEL ET D'ENTITÉS POUR ${game.toUpperCase()}**
---
Pour accomplir ta mission, tu dois utiliser exclusivement les noms de la base de données suivante pour remplir la \`themePalette\` et les \`contents\`.

${textureListText}

${flatListText}

**Things Valides (Monstres, Objets, etc.):**
${data.things.map(t => `- ${t.name} (type: ${t.type})`).join('\n')}
`;

            let creativeBrief = `---
**PARTIE 3 : VOTRE MISSION**
---
Ton travail se déroule en deux tâches séquentielles.

**TÂCHE 1 : DÉFINIR LA DIRECTION ARTISTIQUE**
En te basant sur le thème demandé, conçois et écris un objet \`themePalette\` complet et cohérent. Choisis des textures et des flats dans le vocabulaire fourni à la Partie 2 qui évoquent le mieux l'ambiance du thème.

**TÂCHE 2 : CONSTRUIRE LA CARTE**
En utilisant la palette que TU as créée à la tâche 1, conçois et écris les objets \`rooms\` et \`connections\` pour la carte.

**Objectifs de Conception :**
- **Jeu :** ${game}
- **Thème Directeur :** ${themeName}
- **Taille :** ${size}
- **Connectivité / Structure :** ${connectivity}
- **Brief Créatif Additionnel :** ${description || "Aucun. Liberté créative totale."}

**Instructions Finales :**
1.  **JSON Uniquement :** Ta réponse doit être UNIQUEMENT le bloc de code JSON complet.
2.  **Respecter la Planéité :** Le graphe de pièces doit pouvoir exister dans un espace 2D sans se croiser.
3.  **Cohérence Totale :** Les IDs et les références à la palette doivent être exacts et cohérents.
`;

            document.getElementById('promptOutput').value = dgraphSpecification + gameDataReference + creativeBrief;
        }

        function copyPrompt() {
            const output = document.getElementById('promptOutput');
            if (output.value) { output.select(); navigator.clipboard.writeText(output.value).then(() => { const button = document.getElementById('copyButton'); const originalText = button.textContent; button.textContent = 'Copié !'; setTimeout(() => { button.textContent = originalText; }, 2000); }); }
        }

        function initialize() {
            updateThemes();
            handleThemeChange();
        }

        gameSelect.addEventListener('change', initialize);
        themeSelect.addEventListener('change', handleThemeChange);
        customThemeInput.addEventListener('input', generatePrompt);
        document.getElementById('sizeSelect').addEventListener('change', generatePrompt);
        document.getElementById('connectivitySelect').addEventListener('change', generatePrompt);
        document.getElementById('descriptionText').addEventListener('input', generatePrompt);

        window.addEventListener('load', initialize);
    </script>
</body>
</html>